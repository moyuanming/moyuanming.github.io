
---
layout: post
title:  "二维码生成"
date:   2015-01-27 12:50:00
categories: html
comments: true
---
{% include JB/setup %}

## 功能说明
1.  将报表中的数据生成一个标准的URL
1.  将URL数据生成一个二维码
1.  扫描二维码将报表数据上传到服务器

## URL定义
  `http://tollsystem.net/recv/new?data=02,12,2013-10-01]121064,1,33375,51973,11842,94,1555,0,0,0,0,1555,1555,0*121011,1,33408,43083,9393,124,1955,0,0,0,0,1955,1955,0*121038,1,33425,52218,11586,231,3965,0,0,0,0,3965,3965,0*121015,1,33457,40771,7309,30,310,0,0,0,0,310,310,0*121079,1,40775,54532,11659,43,495,0,0,0,0,495,495,0`
### URL 说明
  Http头+Head+]+ Body*Body……

#### Http头 说明
  Http头：http://tollsystem.net/recv/new?data= 
  表示将数据发送到哪里
#### head 说明
由以下部分组成：{Network},{Plaza},{ReportDate},{ReportType},{Var}
ReportType： 用于区分是那个报表，清帐报表为A ，节假日为B。为减少数据量用单个字母表示某个报表。
Var：版本号，用于同一张报表不同版本，一位数字表示。
例如：奇台收费站的2015-01-27日的清帐报表
05,64,2015-01-27,A,1

#### ] 说明
分割符，将Head和body分开。
#### Body*Body 说明
Body是要发送的数据，每条数据的每个字段用逗号分割，每条记录间用*号分割。
例如：
  121064,1,33375,51973,11842,94,1555,0,0,0,0,1555,1555,0\*121011,1,33408,43083,9393,124,1955,0,0,0,0,1955,1955,0
特别说明：如果有时间字段，时间字段转换成与ReportDate相差的秒数，而不是时间格式


